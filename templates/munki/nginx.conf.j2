server {
    listen                          *:80;
    server_name                     munki.lan.digisacris.net munki.backhaul.digisacris.net munki.digisacris.net;
    server_tokens                   off;
	root                            /var/www/html/;
    index                           index.html index.htm;
    access_log                      /var/log/nginx/munki.log;
    error_log                       /var/log/nginx/munki.log error;
    gzip                            off;
    location / {
        autoindex  on;
    }
}

server {
    listen                          *:443 ssl http2;
    server_name                     munki.backhaul.digisacris.net;
    server_tokens                   off;
    root                            /var/www/html/;
    index                           index.html index.htm;
    access_log                      /var/log/nginx/munki.log;
    error_log                       /var/log/nginx/munki.log error;
    ssl_certificate                 /certificates/wildcard-backhaul-digisacris-net.crt;
    ssl_certificate_key             /certificates/wildcard-backhaul-digisacris-net.key;
    ssl_protocols                   TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers       on;
    ssl_dhparam                     /etc/nginx/dhparam.pem;
    ssl_ciphers                     EECDH+AESGCM:EDH+AESGCM;
    ssl_session_timeout             10m;
    ssl_session_cache               shared:SSL:10m;
    resolver                        10.75.75.1 valid=300s;
    resolver_timeout                5s;
    add_header                      Strict-Transport-Security 'max-age=63072000; includeSubDomains; preload';
    add_header                      X-Frame-Options SAMEORIGIN;
    add_header                      X-Content-Type-Options nosniff;
    add_header                      Referrer-Policy 'no-referrer';
    add_header                      X-XSS-Protection '1; mode=block';
    add_header                      X-Robots-Tag none;
    add_header                      X-Download-Options noopen;
    add_header                      X-Permitted-Cross-Domain-Policies none;
    gzip                            off;
    location / {
        autoindex  on;
    }
}

server {
    listen                          *:443 ssl http2 default_server;
    server_name                     munki.digisacris.net;
    server_tokens                   off;
    root                            /var/www/html/;
    index                           index.html index.htm;
    access_log                      /var/log/nginx/munki.log;
    error_log                       /var/log/nginx/munki.log error;
    ssl_certificate                 /certificates/wildcard-digisacris-net.crt;
    ssl_certificate_key             /certificates/wildcard-digisacris-net.key;
    ssl_protocols                   TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers       on;
    ssl_dhparam                     /etc/nginx/dhparam.pem;
    ssl_ciphers                     EECDH+AESGCM:EDH+AESGCM;
    ssl_session_timeout             10m;
    ssl_session_cache               shared:SSL:10m;
    resolver                        10.75.75.1 valid=300s;
    resolver_timeout                5s;
    add_header                      Strict-Transport-Security 'max-age=63072000; includeSubDomains; preload';
    add_header                      X-Frame-Options SAMEORIGIN;
    add_header                      X-Content-Type-Options nosniff;
    add_header                      Referrer-Policy 'no-referrer';
    add_header                      X-XSS-Protection '1; mode=block';
    add_header                      X-Robots-Tag none;
    add_header                      X-Download-Options noopen;
    add_header                      X-Permitted-Cross-Domain-Policies none;
    gzip                            off;
    location / {
        autoindex  on;
    }
}

server {
    listen                          *:443 ssl http2;
    server_name                     munki.lan.digisacris.net;
    server_tokens                   off;
    root                            /var/www/html/;
    index                           index.html index.htm;
    access_log                      /var/log/nginx/munki.log;
    error_log                       /var/log/nginx/munki.log error;
    ssl_certificate                 /certificates/wildcard-lan-digisacris-net.crt;
    ssl_certificate_key             /certificates/wildcard-lan-digisacris-net.key;
    ssl_protocols                   TLSv1.2 TLSv1.3;
    ssl_prefer_server_ciphers       on;
    ssl_dhparam                     /etc/nginx/dhparam.pem;
    ssl_ciphers                     EECDH+AESGCM:EDH+AESGCM;
    ssl_session_timeout             10m;
    ssl_session_cache               shared:SSL:10m;
    resolver                        10.75.75.1 valid=300s;
    resolver_timeout                5s;
    add_header                      Strict-Transport-Security 'max-age=63072000; includeSubDomains; preload';
    add_header                      X-Frame-Options SAMEORIGIN;
    add_header                      X-Content-Type-Options nosniff;
    add_header                      Referrer-Policy 'no-referrer';
    add_header                      X-XSS-Protection '1; mode=block';
    add_header                      X-Robots-Tag none;
    add_header                      X-Download-Options noopen;
    add_header                      X-Permitted-Cross-Domain-Policies none;
    gzip                            off;
    location / {
        autoindex  on;
    }
}